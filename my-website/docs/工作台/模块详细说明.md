---
sidebar_position: 2
---

# 模块详细说明

FastGPT 工作台提供了丰富的功能模块，每个模块都有特定的功能和配置选项。本文详细介绍各个模块的使用方法。

## 基础模块

### 1. 用户输入模块

用于接收用户的输入信息。

**功能特点：**
- 支持文本、文件、图片等多种输入类型
- 可设置输入验证规则
- 支持必填项检查

**配置参数：**
- **输入类型**：文本/文件/图片/语音
- **提示文本**：给用户的提示信息
- **必填项**：是否为必填字段
- **格式验证**：输入格式验证规则

![用户输入模块](https://doc.fastgpt.cn/_next/static/media/input-module.png)

### 2. AI 对话模块

核心的 AI 对话处理模块。

**功能特点：**
- 支持多种大语言模型
- 可配置系统提示词
- 支持上下文记忆
- 可设置输出格式

**配置参数：**
- **AI 模型**：选择使用的大语言模型
- **系统提示词**：指导 AI 行为的提示词
- **温度**：控制输出的随机性
- **最大长度**：输出内容的最大长度
- **记忆轮数**：保持的对话轮数

![AI对话模块](https://doc.fastgpt.cn/_next/static/media/ai-chat-module.png)

### 3. 知识库搜索模块

从知识库中检索相关信息。

**功能特点：**
- 支持语义搜索
- 可设置相似度阈值
- 支持多知识库检索
- 可配置返回数量

**配置参数：**
- **知识库**：选择要搜索的知识库
- **搜索类型**：语义搜索/关键词搜索
- **相似度**：最小相似度阈值
- **返回数量**：最多返回的结果数

![知识库搜索模块](https://doc.fastgpt.cn/_next/static/media/kb-search-module.png)

## 逻辑控制模块

### 4. 条件判断模块

实现分支逻辑控制。

**功能特点：**
- 支持多种条件判断
- 可设置多个分支
- 支持复杂逻辑表达式

**配置参数：**
- **判断条件**：设置判断的条件
- **比较操作**：等于/不等于/大于/小于等
- **分支数量**：设置分支的数量

**示例配置：**
```json
{
  "conditions": [
    {
      "field": "user_type",
      "operator": "equals",
      "value": "VIP"
    }
  ]
}
```

### 5. 循环处理模块

批量处理数据或重复执行任务。

**功能特点：**
- 支持列表遍历
- 可设置循环次数
- 支持条件退出

**配置参数：**
- **循环类型**：固定次数/遍历列表/条件循环
- **循环次数**：最大循环次数
- **退出条件**：提前退出的条件

## 数据处理模块

### 6. HTTP 请求模块

调用外部 API 接口。

**功能特点：**
- 支持 GET/POST/PUT/DELETE 等方法
- 可配置请求头和参数
- 支持认证机制
- 可处理响应数据

**配置参数：**
- **请求方法**：HTTP 请求方法
- **请求 URL**：API 接口地址
- **请求头**：HTTP 请求头
- **请求体**：POST 请求的数据
- **超时时间**：请求超时时间

![HTTP请求模块](https://doc.fastgpt.cn/_next/static/media/http-module.png)

### 7. 代码执行模块

执行自定义代码逻辑。

**功能特点：**
- 支持 JavaScript/Python 代码
- 可访问上下文变量
- 安全沙盒环境
- 支持异步操作

**配置参数：**
- **代码语言**：JavaScript/Python
- **代码内容**：要执行的代码
- **输入变量**：传入代码的变量
- **输出变量**：代码返回的变量

**示例代码：**
```javascript
function processData(input) {
  // 处理输入数据
  const result = input.map(item => ({
    ...item,
    processed: true,
    timestamp: new Date().toISOString()
  }));
  
  return {
    data: result,
    count: result.length
  };
}

return processData(inputData);
```

### 8. 文本处理模块

对文本进行格式化和转换。

**功能特点：**
- 支持正则表达式
- 可进行格式转换
- 支持模板替换
- 可提取关键信息

**配置参数：**
- **处理类型**：格式化/提取/替换/转换
- **处理规则**：具体的处理规则
- **输出格式**：结果的输出格式

## 集成模块

### 9. 数据库模块

连接和操作数据库。

**功能特点：**
- 支持多种数据库类型
- 可执行 SQL 查询
- 支持数据更新操作
- 提供连接池管理

**配置参数：**
- **数据库类型**：MySQL/PostgreSQL/MongoDB等
- **连接字符串**：数据库连接信息
- **查询语句**：要执行的 SQL 语句
- **参数绑定**：查询参数的绑定

### 10. 邮件发送模块

发送邮件通知。

**功能特点：**
- 支持 HTML 邮件
- 可添加附件
- 支持批量发送
- 可配置邮件模板

**配置参数：**
- **SMTP 配置**：邮件服务器配置
- **收件人**：邮件接收者
- **邮件主题**：邮件标题
- **邮件内容**：邮件正文
- **附件**：邮件附件

## 输出模块

### 11. 响应输出模块

向用户返回处理结果。

**功能特点：**
- 支持多种输出格式
- 可设置响应模板
- 支持流式输出
- 可配置错误处理

**配置参数：**
- **输出格式**：文本/JSON/HTML等
- **响应模板**：输出内容的模板
- **错误处理**：错误情况的处理方式

## 模块连接

### 连接规则

模块间的连接需要遵循以下规则：

1. **数据类型匹配**：输出和输入的数据类型必须匹配
2. **连接顺序**：按照逻辑顺序连接模块
3. **避免循环**：不能形成循环连接
4. **错误处理**：为关键连接添加错误处理

### 数据传递

模块间数据传递的格式：

```json
{
  "data": "实际数据内容",
  "type": "数据类型",
  "metadata": {
    "source": "数据来源",
    "timestamp": "时间戳",
    "format": "数据格式"
  }
}
```

### 变量管理

工作流中的变量管理：

- **全局变量**：整个工作流可访问
- **局部变量**：模块内部使用
- **临时变量**：连接间传递使用
- **环境变量**：系统配置信息

## 最佳实践

### 1. 模块选择

根据需求选择合适的模块：
- 简单逻辑优先使用基础模块
- 复杂处理使用代码执行模块
- 外部集成使用专用模块

### 2. 性能优化

优化模块性能的方法：
- 减少不必要的数据传递
- 合理使用缓存机制
- 避免重复的API调用
- 优化代码执行效率

### 3. 错误处理

为模块添加错误处理：
- 设置合理的超时时间
- 添加重试机制
- 提供降级方案
- 记录错误日志

### 4. 调试技巧

模块调试的技巧：
- 使用单步调试模式
- 检查数据传递过程
- 验证配置参数正确性
- 观察日志输出信息

## 常见问题

### Q: 模块执行失败怎么办？

A: 检查以下几个方面：
- 模块配置是否正确
- 输入数据格式是否匹配
- 网络连接是否正常
- 权限设置是否正确

### Q: 如何提高模块性能？

A: 可以尝试以下方法：
- 优化模块配置参数
- 减少数据传递量
- 使用并行处理
- 合理设置缓存

### Q: 自定义模块如何开发？

A: 目前支持通过代码执行模块实现自定义逻辑，未来会支持插件式的自定义模块开发。

## 相关文档

- [工作台介绍](./工作台介绍.md)
- [工作流最佳实践](./工作流最佳实践.md)
- [调试和测试](./调试和测试.md)
- [API 接口文档](../API接口文档.md)

